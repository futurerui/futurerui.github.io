[{"title":"Retrofit学习及源码分析","url":"/2018/08/11/Retrofit学习及源码分析/","content":"最近参加的很多面试都有问到Retrofit以及RxJava，奈何以前项目使用得不多，因此很遗憾错过了一些比较想去的公司，痛定思痛，因此回家后好好研究了一番。但是实际上做开发，要不断地学习给自己充电，否则就会掉队，因此学习不仅仅是为了应付面试，也不是说项目使用了才去学习，这是不断充实自己的一个过程。\n\n## Retrofit 简介\nRetrofit在[官网](http://square.github.io/retrofit/)有一句简单的介绍：A type-safe HTTP client for Android and Java。翻译过来就是用于Java和Android的类型安全的http客户端。\n\n## Retrofit 使用\n在grdle文件中添加依赖  \n\n``` gradle \n    implementation 'com.squareup.retrofit2:retrofit:2.4.0' \n```\n查看引进的依赖可以看到添加Retrofit依赖后自动依赖了Okhttp。\n### 定义一个接口\n``` Java\npublic interface GitHubService {\n    @GET(\"users/{user}/repos\")\n    Call<List<Repo>> listRepos(@Path(\"user\") String user);\n}\n```  \n通过注解定义描述Http请求，Retrofit内置了五个注解GET，POST，PUT，DELETE，HEAD。Retrofit将网络请求地址分成两部分，一个是baseURL，剩下的在接口方法中通过注解进行设置。接口中的方法返回一个Call实例。   \n请求URL可以通过替换块以及方法的参数进行动态的替换，如上述示例中通过使用{}可以实现在方法`listRepos`中动态替换，方法参数需要添加竹节`@Path(\"user\")`.  \n通过`@Query`注解可以实现动态替换URL中的参数，如下所示： \n\n``` Java \n@GET(\"users/list?sort=desc\")//写在注解中\n\n@GET(\"group/{id}/users\")\nCall<List<User>> groupList(@Path(\"id\") int groupId, @Query(\"sort\") String sort);//通过参数动态添加\n```  \n\n如果有多个参数可以通过map实现，例如：  \n\n``` Java\n@GET(\"group/{id}/users\")\nCall<List<User>> groupList(@Path(\"id\") int groupId, @QueryMap Map<String, String> options);\n```\n接口定义好之后通过Retrofit设置baseURL并将请求发送出去：  \n\n``` Java \nRetrofit retrofit = new Retrofit.Builder()\n                        .addConverterFactory(GsonConverterFactory.create())\n                        .baseUrl(\"https://api.github.com/\").build();\nGitHubService service = retrofit.create(GitHubService.class);\nservice.listRepos(\"futurerui\").enqueue(new Callback<List<Repo>>() {\n    @Override\n    public void onResponse(Call<List<Repo>> call, Response<List<Repo>> response) {\n        Log.e(\"future\",\"\");\n    }\n\n    @Override\n    public void onFailure(Call<List<Repo>> call, Throwable t) {\n        Log.e(\"future\",\"\");\n    }\n});\n ```","tags":["Android"]},{"title":"RxJava 学习及源码分析","url":"/2018/08/11/RxJava-学习及源码分析/","tags":["Android"]},{"title":"动态代理","url":"/2018/07/25/Dynamic-Proxy/","content":"# 动态代理\n","tags":["Java"]},{"title":"Hello World","url":"/2018/07/24/hello-world/","content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n"}]